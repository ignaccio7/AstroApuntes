---
import DetailLabelInfo from "@components/DetailLabelInfo.astro";
import SectionTitle from "@components/SectionTitle.astro";
import ArrowRight from "src/icons/ArrowRight.astro";

const PROJECTS = [
  {
    title: "La gala del sr. Crome",
    subtitle: "PREMIOS A LOS INVISIBLES DEL CINE",
    description: "El evento de presntacion de ...",
    image: "01.jpg",
    link: "uno",
    info: [
      {
        label: "Viewes unicos",
        value: "50M",
      },
      {
        label: "Viewes unicos",
        value: "100M",
      },
      {
        label: "Viewes unicos",
        value: "80M",
      },
      {
        label: "Viewes unicos",
        value: "1M",
      },
    ],
  },
  {
    title: "La gala del sr. Crome",
    subtitle: "PREMIOS A LOS INVISIBLES DEL CINE",
    description: "El evento de presntacion de ...",
    image: "02.jpg",
    link: "uno",
    info: [
      {
        label: "Viewes unicos",
        value: "50M",
      },
      {
        label: "Viewes unicos",
        value: "100M",
      },
      {
        label: "Viewes unicos",
        value: "80M",
      },
      {
        label: "Viewes unicos",
        value: "1M",
      },
    ],
  },
  {
    title: "La gala del sr. Crome",
    subtitle: "PREMIOS A LOS INVISIBLES DEL CINE",
    description: "El evento de presntacion de ...",
    image: "03.jpg",
    link: "uno",
    info: [
      {
        label: "Viewes unicos",
        value: "50M",
      },
      {
        label: "Viewes unicos",
        value: "100M",
      },
      {
        label: "Viewes unicos",
        value: "80M",
      },
      {
        label: "Viewes unicos",
        value: "1M",
      },
    ],
  },
  {
    title: "La gala del sr. Crome",
    subtitle: "PREMIOS A LOS INVISIBLES DEL CINE",
    description: "El evento de presntacion de ...",
    image: "04.jpg",
    link: "uno",
    info: [
      {
        label: "Viewes unicos",
        value: "50M",
      },
      {
        label: "Viewes unicos",
        value: "100M",
      },
      {
        label: "Viewes unicos",
        value: "80M",
      },
      {
        label: "Viewes unicos",
        value: "1M",
      },
    ],
  },
];

---

<section class="min-h-dvh flex w-screen" id="container">
  <!-- LIST OF PROJECTS -->
  <div class="list-projects w-screen flex-shrink-0">
    <SectionTitle title="Proyectos landing" imagen="projects" />
    {
      PROJECTS.map((project) => (
        <article 
          class="relative group h-auto border-t-2 last:border-b-2 border-gray-400"
        >
          {/* Fondo verde */}
          <div class="absolute h-full bg-primary-green w-6 group-hover:w-full transition-all duration-1000 ease-project-timming -z-20" />
          {/* Fondo de imagen */}
          <div
            class="absolute h-full w-full bg-no-repeat bg-cover -z-10 opacity-0 transition-opacity delay-1000 ease-in group group-hover:opacity-100"
            style={{
              backgroundImage: `url("/public/projects/${project.image}")`,
              backgroundPosition: "center",
            }}
          />
          <button class="ml-6 pl-4 flex flex-col items-start justify-center w-full h-full py-4">
            {/* <h3 class="text-6xl tracking-tighter uppercase font-black text-black group-hover:translate-x-14 transition-transform duration-1000 ease-project-timming"> */}
            <h3 class="text-6xl tracking-tighter uppercase font-black text-black">
              {project.title}
            </h3>
            <h4 class="text-xl uppercase group-hover:opacity-0 transition-opacity duration-1000 ease-in-out">
              {project.description}
            </h4>
          </button>
          {/* Flecha Derecha */}
          <div class="arrow flex items-center justify-center absolute top-0 bottom-0 right-4 w-48 border-l border-l-gray-400 group-hover:text-gray-100 group-hover:border-l-white transition-all">
            <ArrowRight className="arrow size-20 group-hover:-translate-x-6 transition-transform" />
          </div>
        </article>
      ))
    }
  </div>

  <!-- DETAIL PROJECT -->
  <article class="h-full flex relative w-screen flex-shrink-0">
    <div
      id="close-detail"
      class="close border border-black text-primary-green text-5xl font-bold absolute top-0 left-0 p-2 cursor-pointer"
    >
      âœ–
    </div>
    <div class="content w-7/12 flex flex-col">
      <header class="flex-1 pt-16 pb-10 px-20 flex flex-col gap-4">
        <h2 class="text-7xl font-bold uppercase tracking-tighter">
          La gala del SR. Croma<span class="text-primary-green text-8xl">.</span
          >
        </h2>
        <p class="text-xl">
          Lorem ipsum dolor sit amet consectetur, adipisicing elit. Iusto odit
          ad incidunt ipsum a, explicabo veritatis praesentium, dolorum
          perferendis dolores maxime eos quasi rerum similique, autem magni quod
          quos impedit!
        </p>
        <p class="text-xl">
          Lorem ipsum dolor sit amet consectetur, adipisicing elit. Iusto odit
          ad incidunt ipsum a, explicabo veritatis praesentium, dolorum
          perferendis dolores maxime eos quasi rerum similique, autem magni quod
          quos impedit!
        </p>
      </header>
      <footer class="bg-primary-green text-center py-8">
        <div class="details flex gap-16 justify-center pb-8">
          <DetailLabelInfo score={"100M"} label="Viewers Unicos" />
          <DetailLabelInfo score={"40M"} label="Pico de espectadores" />
          <DetailLabelInfo score={"260K"} label="Audiencia Media" />
          <DetailLabelInfo score={"5M"} label="Likes en Instagram" />
        </div>

        <button
          class="px-12 py-4 bg-gray-900 rounded-full text-primary-green uppercase text-xl font-bold"
        >
          link
        </button>
      </footer>
    </div>
    <figure class="image w-5/12">
      <img
        src="/public/projects/01.jpg"
        alt="Proyecto 1"
        class="w-full h-full object-cover"
      />
    </figure>
  </article>
</section>

<style>
  .arrow {
    transition:
      translate 1000ms,
      color 500ms 500ms,
      border 1000ms 500ms;
  }

  article:hover h3 {
    animation: project-title 1.1s cubic-bezier(0.13, 0.91, 1, 0.37) both;
  }

  @keyframes project-title {
    100% {
      color: transparent;
      -webkit-text-stroke-width: 2px;
      -webkit-text-stroke-color: rgb(223, 223, 223);
      transform: translateX(150px);
    }
  }

  #container {
    transition: transform 1s ease-in-out
  }

  .slide-in {
    transform: translateX(-100%);
  }
</style>

<script>
  const $container = document.querySelector("#container") as HTMLElement;
  const $list = $container.querySelector(".list-projects") as HTMLElement;
  const $buttons = $list.querySelectorAll('button');
  const $close = $container.querySelector("#close-detail") as HTMLElement;

  $buttons.forEach((button, index) => {
    button.addEventListener("click", (e) => {
      $container.classList.add('slide-in')
    });
  })

  $close.addEventListener("click", (e) => {
    $container.classList.remove('slide-in')
  });

</script>